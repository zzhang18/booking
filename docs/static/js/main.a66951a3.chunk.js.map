{"version":3,"sources":["pages/User.js","i18n.js","App.js","reportWebVitals.js","index.js"],"names":["Search","Input","WrappedComponent","MyComponent","formRef","React","createRef","save","e","a","props","edit","setState","visible","cancelModal","current","resetFields","onCancel","onFinish","values","console","log","this","title","form","target","t","okText","cancelText","onOk","ref","initialValues","name","mobile","email","Item","label","Component","EditModalWrapper","withTranslation","withRef","hoc","useTranslation","i18n","myRef","style","padding","marginBottom","float","type","margin","onClick","show","placeholder","onSearch","value","search","width","changeLanguage","href","dataSource","users","columns","dataIndex","key","sorter","b","render","user","onConfirm","delete","cancel","state","fetchUsers","_","times","index","filter","message","success","resources","translation","use","Backend","LanguageDetector","initReactI18next","init","react","useSuspense","ns","defaultNS","fallbackLng","debug","saveMissing","interpolation","escapeValue","require","changeLocale","locale","zhCN","enUS","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.a66951a3.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Table, Button, Modal, Divider, Popconfirm, Form, Input, message } from 'antd';\r\nimport _ from 'lodash';\r\nimport { useTranslation, withTranslation } from 'react-i18next';\r\n\r\nconst { Search } = Input;\r\nfunction User(props) {\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const myRef = React.createRef();\r\n  return (\r\n    <div style={{ padding: 40 }}>\r\n      <div style={{ marginBottom: 20 }}>\r\n        <div><h1>{t('user')}</h1></div>\r\n        <div style={{ float: 'left' }}>\r\n          <Button type=\"primary\" style={{ margin: '0 10px 10px 0' }} onClick={() => props.show()}>{t('addUser')}</Button>\r\n          <Search\r\n            placeholder='search user'\r\n            onSearch={(value) => props.search(value)}\r\n            style={{ width: 240 }}\r\n          />\r\n        </div>\r\n        <div style={{ float: 'right' }}>\r\n          <Button style={{ margin: '0 10px 10px 0' }} onClick={async () => {\r\n            i18n.changeLanguage(t('targetLangCode'));\r\n            // props.changeLocale();\r\n          }}>{t('targetLang')}</Button>\r\n          <Button><a href='https://github.com/zzhang18/booking'>GitHub</a></Button>\r\n        </div>\r\n      </div>\r\n      <Table\r\n        dataSource={props.users}\r\n        columns={[\r\n          { title: t('name'), dataIndex: 'name', key: 'name', width: 200, sorter: (a, b) => a.name > b.name },\r\n          { title: t('mobile'), dataIndex: 'mobile', key: 'mobile', width: 160, sorter: (a, b) => a.mobile - b.mobile },\r\n          { title: t('email'), dataIndex: 'email', key: 'email', width: 160, sorter: (a, b) => a.email - b.email },\r\n          {\r\n            title: t('actions'), key: 'action', width: 160,\r\n            render: (e, user) => {\r\n              return (\r\n                <div>\r\n                  <a onClick={() => props.show(user)}>{t('modify')}</a>\r\n                  <Divider type=\"vertical\" />\r\n                  <Popconfirm title={t('confirmToDelete')} onConfirm={() => { props.delete(user); }} okText={t('confirm')} cancelText={t('cancel')}>\r\n                    <a>{t('delete')}</a>\r\n                  </Popconfirm>\r\n                </div>\r\n              );\r\n            },\r\n          },\r\n        ]}\r\n      />\r\n\r\n      <EditModalWrapper\r\n        ref={myRef}\r\n        title={props.title}\r\n        visible={props.visible}\r\n        edit={(user) => props.edit(user)}\r\n        onCancel={props.cancel}\r\n        target={props.user}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n// use myRef.current to access it\r\n\r\nclass MyComponent extends React.Component {\r\n  formRef = React.createRef();\r\n\r\n  save = async (e) => {\r\n    this.props.edit();\r\n    this.setState({ visible: false });\r\n  };\r\n\r\n  cancelModal = async () => {\r\n    this.formRef.current.resetFields();\r\n    this.props.onCancel();\r\n  };\r\n\r\n  onFinish = values => {\r\n    console.log('Received values of form: ', values);\r\n  };\r\n\r\n  render() {\r\n    const { visible, form, title, target, t } = this.props;\r\n    return (\r\n      <>\r\n        <Modal\r\n          title={title}\r\n          visible={visible}\r\n          okText={t('confirm')}\r\n          cancelText={t('cancel')}\r\n          onOk={this.save}\r\n          onCancel={this.cancelModal}\r\n        >\r\n          <Form ref={this.formRef} initialValues={{ name: target ? target.name : null, mobile: target ? target.mobile : null, email: target ? target.email : null }} >\r\n            <Form.Item name='name' label={t('name')}>\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item name='mobile' label={t('mobile')}>\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item name='email' label={t('email')}>\r\n              <Input />\r\n            </Form.Item>\r\n          </Form>\r\n        </Modal>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst EditModalWrapper = withTranslation('translation', { withRef: true })(MyComponent);\r\n\r\n// then pass a ref in your render method like\r\n// const myRef = React.createRef();\r\n// <EditModalWrapper ref={myRef} />;\r\n\r\nlet hoc = (WrappedComponent) => {\r\n  return withTranslation()(class EnhancedComponent extends Component {\r\n    get t() { return this.props.t; }\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        user: null,\r\n        users: null,\r\n        visible: false,\r\n        title: 'Add user',\r\n      };\r\n    }\r\n\r\n    async componentDidMount() {\r\n      await this.fetchUsers();\r\n    }\r\n\r\n    async fetchUsers() {\r\n      let users = _.times(10, index => {\r\n        return {\r\n          \"name\": 'user' + index,\r\n          \"mobile\": 'mobile' + index,\r\n          \"email\": 'email' + index\r\n        };\r\n      }\r\n      );\r\n      this.setState({ users });\r\n    }\r\n\r\n    async search(value) {\r\n      let users = _.times(10, index => {\r\n        return {\r\n          \"name\": 'user' + index,\r\n          \"mobile\": 'mobile' + index,\r\n          \"email\": 'email' + index\r\n        };\r\n      }\r\n      );\r\n      this.setState({ users: value ? _.filter(users, { 'name': value }) : users });\r\n    }\r\n\r\n    async show(user) {\r\n      this.setState({ visible: true, user, title: user ? this.t('editUser') : this.t('addUser') });\r\n    }\r\n\r\n    async edit(user) {\r\n      this.cancel();\r\n    }\r\n\r\n    async cancel() {\r\n      this.setState({ visible: false, user: null });\r\n    }\r\n\r\n    async delete(user) {\r\n      message.success('deleted');\r\n    }\r\n\r\n    render() {\r\n      return <WrappedComponent\r\n        user={this.state.user}\r\n        users={this.state.users}\r\n        title={this.state.title}\r\n        visible={this.state.visible}\r\n        cancel={() => this.cancel()}\r\n        show={(user) => this.show(user)}\r\n        edit={(user) => this.edit(user)}\r\n        search={(value) => this.search(value)}\r\n      />;\r\n    }\r\n  });\r\n};\r\n\r\nexport default hoc(User);\r\n","import i18n from 'i18next';\r\nimport Backend from 'i18next-xhr-backend';\r\nimport LanguageDetector from 'i18next-browser-languagedetector';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport translationENUS from './locales/en-US/translation.json';\r\nimport translationZHCN from './locales/zh-CN/translation.json';\r\n\r\n// the translations\r\nconst resources = {\r\n\t'en-US': {\r\n\t\ttranslation: translationENUS\r\n\t},\r\n\t'zh-CN': {\r\n\t\ttranslation: translationZHCN\r\n\t}\r\n};\r\n\r\ni18n\r\n\t// load translation using xhr -> see /public/locales\r\n\t// learn more: https://github.com/i18next/i18next-xhr-backend\r\n\t.use(Backend)\r\n\t// detect user language\r\n\t// learn more: https://github.com/i18next/i18next-browser-languageDetector\r\n\t.use(LanguageDetector)\r\n\t// pass the i18n instance to react-i18next.\r\n\t.use(initReactI18next)\r\n\t// init i18next\r\n\t// for all options read: https://www.i18next.com/overview/configuration-options\r\n\t.init({\r\n\t\t// backend: {\r\n\t\t//   // for all available options read the backend's repository readme file\r\n\t\t//   loadPath: './locales/{{lng}}/{{ns}}.json'\r\n\t\t// },\r\n\t\treact: {\r\n\t\t\tuseSuspense: false //   <---- this will do the magic\r\n\t\t},\r\n\t\tresources,\r\n\t\tns: ['translation'],\r\n\t\tdefaultNS: 'translation',\r\n\t\t// lng:'zh-CN', //lock default lang\r\n\t\t// lng: 'en-US',\r\n\t\tfallbackLng: 'zh-CN',\r\n\t\tdebug: true,\r\n\t\tsaveMissing: true,\r\n\t\tinterpolation: {\r\n\t\t\tescapeValue: false, // not needed for react as it escapes by default\r\n\t\t}\r\n\t});\r\n\r\nexport default i18n;\r\n","import React, { Component } from 'react';\nimport { ConfigProvider } from 'antd';\nimport _ from 'lodash';\nimport './App.css';\nimport User from './pages/User';\nimport i18n from './i18n';\nimport { useTranslation, withTranslation } from 'react-i18next';\nimport zhCN from 'antd/es/locale/zh_CN';\nimport enUS from 'antd/es/locale/en_US';\nimport moment from 'moment';\nimport 'moment/locale/zh-cn';\nimport 'moment/locale/en-gb';\nimport \"@babel/polyfill\"\nrequire('es6-promise/auto');\n\n\nfunction App(props) {\n  return (\n    <div>\n      <ConfigProvider locale={props.locale}>\n        <User\n          changeLocale={props.changeLocale}\n        />\n      </ConfigProvider>\n    </div>\n  );\n}\n\nlet hoc = (WrappedComponent) => {\n  return class EnhancedComponent extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        locale: null\n      };\n    }\n\n    async componentDidMount() {\n\n    }\n\n    changeLocale = async () => {\n\t\t\tthis.setState({ locale: this.t('thisLanguageMomentCode') === 'zh-cn' ? zhCN : enUS });\n\t\t}\n\n    render() {\n      return <WrappedComponent\n        changeLocale={this.changeLocale}\n      />;\n    }\n  };\n};\n\nexport default hoc(App);\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport './i18n';\n\nReactDOM.render(\n  <App />\n  , document.getElementById('root'));\n\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}